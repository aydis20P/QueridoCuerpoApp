{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/styles.css' %}"> 
<title>Calendario de citas</title>
{% endblock head %}

{% block header %}
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light">
    <!-- Container wrapper -->
    <div class="container-fluid">
        <!-- Toggle button -->
        <button
        class="navbar-toggler"
        type="button"
        data-mdb-toggle="collapse"
        data-mdb-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
        >
            <i class="fas fa-bars"></i>
        </button>
        <div class="row g-0">
                <div class="col p-3">
                    <a href="#" class="btn btn-outline-light btn-floating" data-mdb-ripple-color="dark">
                        <i class="fas fa-user-alt"></i>
                    </a>
                </div>
                <div class="col p-3">
                    <a href="#" class="btn btn-outline-light btn-floating" data-mdb-ripple-color="dark">
                        <i class="fas fa-clock"></i>
                    </a>
                </div>
        </div>
  
        <!-- Collapsible wrapper -->
        <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
            <!-- Right links -->
            <div class="d-flex justify-content-end">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/">Cerrar sesión</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Mi perfíl</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Configuración</a
                    >
                </li>
                </ul>
            </div>
            <!-- Left links -->
        <!-- Collapsible wrapper -->
        </div>
    <!-- Container wrapper -->
    </div>
</nav>
  <!-- Navbar -->
      
{% endblock header %}


{% block content %}

<div class="container mt-3">
    <div id="card-mes" class="row">
        <div class="col">
            <div class="card text-white bg-info">
                <div class="card-header">
                    <h5>Mes:</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div></div>
                        <div>
                            <select id="select-mes" class="form-select mb-3 mt-3">
                                <option value="0" selected>Selecciona un mes</option>
                                <option value="1">Enero</option>
                                <option value="2">Febrero</option>
                                <option value="3">Marzo</option>
                                <option value="4">Abril</option>
                                <option value="5">Mayo</option>
                                <option value="6">Junio</option>
                                <option value="7">Julio</option>
                                <option value="8">Agosto</option>
                                <option value="9">Septiembre</option>
                                <option value="10">Octubre</option>
                                <option value="11">Noviembre</option>
                                <option value="12">Diciembre</option>
                            </select>
                            <h5 id="text-mes" style="display: none;">test</h5>
                        </div>
                        <div></div>
                    </div>
                    <div class="col d-flex justify-content-end" onclick="showCardDia('card-dia')">
                        <p id="sig-mes" class="lead mb-1">
                            <small>
                                Siguiente
                            </small>
                        </p>
                        <i id="sig-mes-icon" class="fas fa-arrow-down p-2"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="card-dia" class="row mt-3" style="display: none;">
        <div class="col">
            <div class="card text-white bg-info">
                <div class="card-header">
                    <h5>Día:</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-center">
                        <div></div>
                        <div>
                            <select id="select-dia" class="form-select mb-3 mt-3">
                                <option value="0" selected>Selecciona un día</option>
                                {% for month in months %}
                                    {% for i in month.2 %}
                                        {% comment %}
                                        <option name="{{ month.3 }}" value="{{ i }}" style="display: none;">{{ i }}</option>
                                        {% endcomment %}
                                    {% endfor %}
                                {% endfor %}
                            </select>
                            <h5 id="text-dia" style="display: none;">test</h5>
                        </div>
                        <div></div>
                    </div>
                    <div id="botones-dia" class="col d-flex justify-content-between">
                        <div class="d-flex justify-content-end" onclick="regresaCardMes('card-dia')">
                            <p class="lead mb-1">
                                <small>
                                    Anterior
                                </small>
                            </p>
                            <i class="fas fa-arrow-up p-2"></i>
                        </div> 
                        <div class="d-flex justify-content-end" onclick="showCardHorario('btn-consultar')">
                            <p class="lead mb-1">
                                <small>
                                    Siguiente
                                </small>
                            </p>
                            <i class="fas fa-arrow-down p-2"></i>
                        </div> 
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="btn-consultar" class="row mt-3 mb-3" style="display: none;">
        <div class="col">
            <div class="row">
                <div class="col d-grid">
                    <a class="btn btn-outline-light" data-mdb-ripple-color="dark" onclick="regresaCardDia('btn-consultar')">
                        Editar <i class="fas fa-edit icon-success"></i>
                    </a>
                </div>
                <div class="col d-grid">
                    <a href="resumen-usuario" class="btn btn-outline-light" data-mdb-ripple-color="dark">
                        Consultar <i class="fas fa-search icon-success"></i>
                    </a>  
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock content %}

{% block script %}
<script>

    function hideShow(id) {
        var x = document.getElementById(id);
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }

    function showCardDia(id) {
        var x = document.getElementById(id);
        x.style.display = "block";
        var y = document.getElementById("select-mes");
        var i = y.selectedIndex;
        document.getElementById("text-mes").innerHTML = y.options[i].textContent;
        document.getElementById("text-mes").style.display = "block";
        y.style.display = "none";
        document.getElementById("sig-mes").style.display = "none";
        document.getElementById("sig-mes-icon").style.display = "none";

        var selectDia = document.getElementById("select-dia");
        var m = y.options[i].value;
        {% for month in months %}
            if ({{ month.3 }} == m){
                {% for i in month.2 %}
                    var option = document.createElement("option");
                    option.text = "{{ i }}";
                    selectDia.add(option, selectDia[{{ i }}]);
                {% endfor %}
            }
        {% endfor %}
    }

    function regresaCardMes(id) {
        document.getElementById(id).style.display = "none";
        document.getElementById("card-mes").style.display = "block";
        document.getElementById("select-mes").style.display = "block";
        document.getElementById("text-mes").style.display = "none";
        document.getElementById("sig-mes").style.display = "block";
        document.getElementById("sig-mes-icon").style.display = "block";

        var selectDia = document.getElementById("select-dia");
        for (i = selectDia.options.length-1; i >= 0; i--) {
            selectDia.options[i] = null;
        }
    }

    function showCardHorario(id) {
        var x = document.getElementById(id);
        x.style.display = "block";
        var y = document.getElementById("select-dia");
        var i = y.selectedIndex;
        document.getElementById("text-dia").innerHTML = y.options[i].value;
        document.getElementById("text-dia").style.display = "block";
        y.style.display = "none";
        document.getElementById("botones-dia").style.display = "none";
        document.getElementById("botones-dia").classList.remove("d-flex");
    }

    function regresaCardDia(id) {
        document.getElementById(id).style.display = "none";
        document.getElementById("card-dia").style.display = "block";
        document.getElementById("select-dia").style.display = "block";
        document.getElementById("text-dia").style.display = "none";
        document.getElementById("botones-dia").classList.add("d-flex");
        document.getElementById("botones-dia").style.display = "block";
    }

</script>
{% endblock script %}